{% extends "__custom_base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block messages %}
    {% include '_messages.html' %}
{% endblock %}

<script>
    {% block jquery %}

{#        Paynet.onPaymentClick(function () {#}
{#          if (true) {#}
{#            alert("True.");#}
{#            return true; //Gömülü form ödeme ekranı açılır.#}
{#          }else {#}
{#            alert("Uyarı.");#}
{#            return false;    //Gömülü form ödeme ekranı açılmaz.#}
{#         }#}
{#    });#}

    {% endblock %}
</script>

{% block inner %}


    {% if not user_can_continue %}
        <div class='col-sm-6'>
            <p class='lead'>Üye olmadan satın alacağım!</p>


            <form method='POST' action=''>{% csrf_token %}
                {{ form|crispy }}
                <input type='submit' class='btn-block aa-submit-btn' value='Üye olmadan devam et'/>
            </form>


        </div>
        <div class='col-sm-6'>
            <p class='lead'>Giriş yaparak devam edeceğim!</p>
            <form method='POST' action="{% url 'account_login' %}"> {% csrf_token %}
                {{ login_form|crispy }}

                <input type='hidden' name='next' value='{{ next_url }}'/>
                <input type='submit' class='btn-block aa-submit-btn' value='Giriş Yap'/>
            </form>
            <p class='text-center'>

            <p>{% trans "Forgot password" %}? <a href="{% url 'account_reset_password' %}">{% trans "Reset it" %}</a>!</p>
            <p>{% trans "Not member" %}? <a href="{% url 'account_signup' %}">{% trans "Register" %}</a>!</p>
            </p>

        </div>

    {% else %}

    {% include "orders/order_summary_short.html" with order=order %}

    <p>
        <a href='{% url "order_address" %}'>Adres değiştir</a>
    </p>
    <br/>

    <form id="checkout" method='POST' action="{% url 'checkout_final' %}">{% csrf_token %}
        <script
            class="paynet-button"
            type="text/javascript"
            src="{{ paynet_js_url }}"
            data-key="{{ paynet_publishable_key }}"
            data-amount="{{ order.paynet_order_total }}"
            data-image="http://icons.iconarchive.com/icons/stalker018/mmii-flat-vol-3/72/dictionary-icon.png"
            data-button_label="ÖDEMEYİ TAMAMLA"
            data-description="Ödemenizi tamamlamak için bilgileri girip tamam butonuna basınız"
            data-no_instalment="false"
            data-tds_required="true">
        </script>
    </form>


    {% comment %}
        <form action="/Demo/ChargeTransaction" method="post" name="checkout-form" id="checkout-form">
        <input name="__RequestVerificationToken" type="hidden" value="2xFtq1P7AtsckyuTGsbWTcjwq2K7kcadWHV6RX8pPUl6ZKiSLzt2HlW21zFY8QgdejoQFk--dzUzofyCDGamT3_fxmgBsiiujeAouwa890A1">
        <script type="text/javascript"
                class="paynet-button"
                src="https://pts-pj.paynet.com.tr/public/js/paynet.js"
                data-key="pbk_pcs_wCtr5nd31EhNm7DhjUarQpgxQasTb2pa"
                data-amount="100"
                data-image="http://icons.iconarchive.com/icons/stalker018/mmii-flat-vol-3/72/dictionary-icon.png"
                # yukarıdaki alana iştebu logosu koyalım
                data-button_label="Ödemeyi Tamamla"
                data-description="Ödemenizi tamamlamak için bilgileri girip tamam butonuna basınız"
                data-agent=""
                data-add_commission_amount="false"
                data-no_instalment="false"  # bunu rakama göre true false yapabiliriz
                data-tds_required="false"  # biz bütün işlemleri 3D Secure yapalım.
                data-pos_type="5"  # bunu 1 yapınca POS tipi kullanılamaz hatası veriyor.
        >

        </script>

        <input type="hidden" id="ref_val" name="ref_val" value="1234">
        <input type="hidden" id="xactid" name="xactid" value="1111">
        <input type="hidden" id="adress" name="adress" value="ARENA">
        <input type="hidden" id="is_tds" name="is_tds" value="true">
        <input type="hidden" id="amount" name="amount" value="11111111">
        <input type="hidden" id="card_no" name="card_no" value="0000000">
    <button type="button" class="paynetj-button"><span>Ödemeyi Tamamla</span></button></form>
    {% endcomment %}

    {% endif %}


{% endblock %}

{% block javascript_section %}
    {% include '_javascripts/_javascript_home.html' %}
{% endblock %}
